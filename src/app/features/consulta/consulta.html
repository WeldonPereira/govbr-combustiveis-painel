<section class="consulta-gov">
  <header class="consulta-gov__header">
    <h1 class="consulta-gov__title">Consulta de Abastecimentos</h1>
    <p class="consulta-gov__subtitle">Visualize e filtre registros de abastecimento monitorados</p>
  </header>

  <form class="consulta-gov__filters">
    <div class="filter-group">
      <label for="uf">Estado (UF)</label>
      <select id="uf" (change)="facade.filtrarUf($any($event.target).value)">
        <option value="">Todos os Estados</option>
        <option value="AC">AC</option>
        <option value="AL">AL</option>
        <option value="AP">AP</option>
        <option value="AM">AM</option>
        <option value="BA">BA</option>
        <option value="CE">CE</option>
        <option value="DF">DF</option>
        <option value="ES">ES</option>
        <option value="GO">GO</option>
        <option value="MA">MA</option>
        <option value="MT">MT</option>
        <option value="MS">MS</option>
        <option value="MG">MG</option>
        <option value="PA">PA</option>
        <option value="PB">PB</option>
        <option value="PR">PR</option>
        <option value="PE">PE</option>
        <option value="PI">PI</option>
        <option value="RJ">RJ</option>
        <option value="RN">RN</option>
        <option value="RS">RS</option>
        <option value="RO">RO</option>
        <option value="RR">RR</option>
        <option value="SC">SC</option>
        <option value="SP">SP</option>
        <option value="SE">SE</option>
        <option value="TO">TO</option>
      </select>
    </div>

    <div class="filter-group">
      <label for="combustivel">Combustível</label>
      <select id="combustivel" (change)="facade.filtrarCombustivel($any($event.target).value)">
        <option value="">Todos</option>
        <option value="Gasolina">Gasolina</option>
        <option value="Diesel">Diesel</option>
        <option value="Etanol">Etanol</option>
      </select>
    </div>

    <div class="filter-group">
      <label>Período</label>
      <div class="date-range">
        <input
          type="date"
          (change)="
            facade.filtrarPeriodo(
              $any($event.target).value,
              $any($event.target.nextElementSibling).value
            )
          "
        />
        <input
          type="date"
          (change)="
            facade.filtrarPeriodo(
              $any($event.target.previousElementSibling).value,
              $any($event.target).value
            )
          "
        />
      </div>
    </div>
  </form>

  <div class="consulta-gov__table-wrapper">
    <table class="consulta-gov__table">
      <thead>
        <tr>
          <th>Data</th>
          <th>Posto</th>
          <th>Cidade / UF</th>
          <th>Combustível</th>
          <th>Valor por Litro</th>
          <th>Total Pago</th>
        </tr>
      </thead>

      <tbody>
        @for (a of registros$ | async; track a.id) {
        <tr>
          <td>{{ a.data }}</td>
          <td>{{ a.posto }}</td>
          <td>{{ a.cidade }}/{{ a.uf }}</td>
          <td>{{ a.combustivel }}</td>
          <td>R$ {{ a.valorLitro }}</td>
          <td class="total">R$ {{ a.totalPago }}</td>
        </tr>
        }
      </tbody>
    </table>
  </div>

  <footer class="consulta-gov__pagination">
    <button (click)="facade.paginaAnterior()">Anterior</button>
    <span>Página {{ paginaAtual$ | async }} de {{ totalPaginas$ | async }}</span>
    <button (click)="facade.proximaPagina()">Próxima</button>
  </footer>
</section>
